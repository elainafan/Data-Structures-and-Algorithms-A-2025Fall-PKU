10.1

(1)

```cpp
Node* search(Node *head, Node **p, int K) {
    if (head == NULL || p == NULL) {
        return NULL; 
    }

    Node *current = *p;
    if (current == NULL) {
        current = head;
    }

    if (current->data == K) {
        return current; 
    } else if (current->data < K) {
        while (current->next != NULL) {
            current = current->next;
            if (current->data == K) {
                *p = current; 
                return current;
            }
            if (current->data > K) {
                break; 
            }
        }
    } else {
        while (current->prior != NULL) {
            current = current->prior;
            if (current->data == K) {
                *p = current; 
                return current;
            }
            if (current->data < K) {
                break; 
            }
        }
    }
    return NULL; 
}
```

(2)

应该为 $E=\frac{1}{n^2}\sum\limits_{i=1}^{n}\sum\limits_{j=1}^{n}|i-j|=\frac{n^2-1}{3n}$ ，当 $n$ 较大时，近似为 $\frac{n}{3}$

10.2

(1)

| 地址 | 0  | 1  | 2  | 3  | 4  | 5  | 6  | 7  | 8  | 9  | 10 | 11 | 12 |
|------|----|----|----|----|----|----|----|----|----|----|----|----|----|
| 元素 | 78 | -  | 15 | 03 | -  | 57 | 45 | 20 | 32 | 33 | 23 | -  | 12 |

平均检索长度为 1.4

(2)

| 地址 | 0  | 1  | 2  | 3  | 4  | 5  | 6  | 7  | 8  | 9  | 10 | 11 | 12 |
|------|----|----|----|----|----|----|----|----|----|----|----|----|----|
| 元素 | 78 | -  | 15 | 03 | -  | 57 | 45 | 20 | 33 | -  | 23 | 32 | 12 |

平均检索长度为 1.2

10.3

思想：用 ``unordered_map<int,vector<int>>`` 存S_1中的树，再查询即可。

```c
unordered_map<int,vector<int>> ma;
vector<vector<int>>res;
for(int i=0;i<=n-1;i++) ma[s1[i]].push_back(i);
for(int i=0;i<=m-1;i++){
    if(ma.count(target-s2[i])){
        for(int j=0;j<ma[target-s2[i]].size();j++) res.push_back(ma[target-s2[i]][j],i);
    }
}
return res;
```

时间复杂度约为 $O(N^2)$