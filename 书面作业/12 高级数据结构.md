12.1

```cpp
#include <iostream>
using namespace std;

enum ElemTag { ATOM, LIST };

struct GLNode {
    ElemTag tag;
    union {
        char atom;
        struct {
            GLNode *hp, *tp;
        } ptr;
    } un;
};

bool isPureList(GLNode* L) {
    if (!L) return true;
    if (L->tag == ATOM) return false;
    if (!isPureList(L->un.ptr.hp)) return false;
    return isPureList(L->un.ptr.tp);
}
```

12.2

```cpp
vector<double> csrMultiplyVector(const CSR& A, const vector<double>& x) {
    if (x.size() != A.col) return {};
    vector<double> y(A.row, 0.0);
    for (int i = 0; i < A.row; ++i) {
        for (int k = A.row_ptrs[i]; k < A.row_ptrs[i + 1]; ++k) {
            y[i] += A.value[k] * x[A.col_index[k]];
        }
    }
    return y;
}
```

12.3

```
        38
      /    \
    20      60
   /  \    /  \
 10   25  50   70
  \    \   \
  15   30  55
```

12.4

(1)

Trie需要维护与字符集大小相等的子节点指针数组，存在大量空指针冗余，没有路径压缩。

MPT有路径压缩，共享子树，动态子节点存储，空间效率远高于传统Trie。

(2)

压缩Trie、双数组Trie、哈希Trie等